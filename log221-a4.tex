\documentclass[a4paper]{article}
\usepackage[margin=1in]{geometry}

\usepackage{preamble}
\usepackage{log221-a4-macros}
\usepackage{showkeys}

\title{LOG 221 - A4}
\author{Frank Tsai}

\begin{document}

\maketitle

\comment{The height bounds may be wrong.}

By inspection, the inversion lemma still holds for $\dVdash{n}{\ell}{k}{q}$.
\begin{lemma}\label{0000}
  If $\dVdash{n}{\ell}{k}{q} \Gamma \Rightarrow C,\Delta$ and $\dVdash{m}{\ell}{k}{q} \Lambda,C \Rightarrow \Pi$ with $\dRank{C} = \ell + 1$, $\cRank{C} < k$, and $\qRank{C} < q$, then $\dVdash{h}{\ell}{k}{q} \Gamma,\Lambda \Rightarrow \Delta,\Pi$, where $h \leq \max(n,m) + 2$.
\end{lemma}
\begin{proof}
  We proceed by case analysis on $C$.
  Since $\dRank{C} \geq 1$, we do not have to consider atoms, $\bot$, and $Qx.A(x)$.
  \begin{itemize}
  \item[$\lnot A$:] By inversion, we have $\dVdash{n}{\ell}{k}{q} \Gamma,A \Rightarrow \Delta$ and $\dVdash{m}{\ell}{k}{q} \Gamma \Rightarrow A, \Delta$.
    Since $\dRank{A} = \ell$, we can apply \rCut{} to obtain the required sequent.
    The height of this derivation is bounded by $\max(n,m) + 1$.
  \item[$A \wedge B$:] By inversion, we have $\dVdash{n}{\ell}{k}{q} \Gamma \Rightarrow A,\Delta$; $\dVdash{n}{\ell}{k}{q} \Gamma \Rightarrow B,\Delta$; and $\dVdash{m}{\ell}{k}{q} \Lambda,A,B \Rightarrow \Pi$.
    Since $\dRank{A}$ and $\dRank{B}$ are bounded by $\ell$, we can apply two \rCut{}s to obtained the required sequent.
    \[
      \ebrule{
        \hypo{\Gamma \Rightarrow A,\Delta}
        \hypo{\Gamma \Rightarrow B,\Delta}
        \hypo{\Lambda,A,B \Rightarrow \Pi}
        \infer2[\rCut]{\Gamma,\Lambda,A \Rightarrow \Delta,\Pi}
        \infer2[\rCut]{\Gamma,\Lambda \Rightarrow \Delta,\Pi}
      }
    \]
    The height of this derivation is bounded by $\max(n,m) + 2$.
  \item[$A \vee B$:] This is analogous to the previous case: use inversion on both assumptions; and then apply two \rCut{}s.
  \end{itemize}
\end{proof}

\begin{lemma}\label{0004}
  If $\dVdash{n}{0}{k}{q} \Gamma \Rightarrow C,\Delta$ and $\dVdash{m}{0}{k}{q} \Lambda,C \Rightarrow \Pi$ with $\cRank{C} < k$ and $\qRank{C} = q$, then $\dVdash{h}{\ell}{k}{q} \Gamma,\Lambda \Rightarrow \Delta,\Pi$, where $h \leq \comment{n + m}$.
\end{lemma}

\begin{lemma}\label{0002}
  If $\dVdash{n}{\ell + 1}{k}{q} \Gamma \Rightarrow \Delta$, then $\dVdash{n+1}{\ell}{k}{q} \Gamma \Rightarrow \Delta$.
\end{lemma}
\begin{proof}
  We proceed by induction on $n$; and we do a case analysis on the last applied rule.
  Most cases are uninteresting: apply the induction hypothesis to the premise(es) and then the corresponding rule.
  \begin{itemize}
  \item[\rId:] In this case, there is no cut formula; hence we have $\dVdash{n}{\ell}{k}{q} \Gamma \Rightarrow \Delta$.
  \item[\rLBot:] Analogous to \rId.
  \item[\rRNot:] The induction hypothesis yields $\dVdash{n - 1 + 1}{\ell}{k}{q} \Gamma, A \Rightarrow \Delta$.
    Then we obtain $\dVdash{n+1}{\ell}{k}{q} \Gamma \Rightarrow \lnot A, \Delta$ by applying \rRNot.
  \item[\rLDis:] The induction hypothesis yields $\dVdash{n - 1 + 1}{\ell}{k}{q} \Gamma, A \Rightarrow \Delta$ and $\dVdash{n - 1 + 1}{\ell}{k}{q} \Gamma, B \Rightarrow \Delta$, then we obtain $\dVdash{n+1}{\ell}{k}{q} \Gamma, A \vee B \Rightarrow \Delta$ by applying \rLDis.
  \item[\rCut:] Let $C$ be the cut formula; there are two cases to consider: (1) $\dRank{C} < \ell + 1$, or (2) $\dRank{C} = \ell + 1$.
    In the former case, we do not have to alter anything since we can afford this \rCut, while in the latter case, we apply \cref{0000}, yielding $\dVdash{n - 1 + 2}{\ell}{k}{q} \Gamma \Rightarrow \Delta$.
  \end{itemize}
\end{proof}

\begin{lemma}\label{0003}
  If $\dVdash{n}{\ell}{k}{q} \Gamma \Rightarrow \Delta$, then $\dVdash{n + \ell}{0}{k}{q} \Gamma \Rightarrow \Delta$.
\end{lemma}
\begin{proof}
  We proceed by induction on $\ell$.
  Suppose that $\ell = \ell' + 1$ and $\dVdash{n}{\ell' + 1}{k}{q} \Gamma \Rightarrow \Delta$.
  By \cref{0002}, we have $\dVdash{n + 1}{\ell'}{k}{q} \Gamma \Rightarrow \Delta$; then the induction hypothesis yields $\dVdash{n + 1 + \ell'}{0}{k}{q} \Gamma \Rightarrow \Delta$.
\end{proof}

\begin{lemma}\label{0005}
  If $\dVdash{n}{0}{k}{q+1} \Gamma \Rightarrow \Delta$, then $\dVdash{\comment{2^n}}{\comment{k}}{k}{q} \Gamma \Rightarrow \Delta$.
\end{lemma}
\begin{proof}
  We proceed by induction on $n$; and we do a case analysis on the last applied rule.
  \begin{itemize}
  \item[\rCut:] 
  \end{itemize}
\end{proof}

\begin{corollary}
  If $\dVdash{n}{0}{k}{q+1} \Gamma \Rightarrow \Delta$, then $\dVdash{\comment{2^n+k}}{0}{k}{q} \Gamma \Rightarrow \Delta$.
\end{corollary}

\section*{Problem 1}
\label{0001}

% \bibliography{bib}
% \bibliographystyle{alpha}

\end{document}
